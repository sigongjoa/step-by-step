<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>인지 교정 분석 - Edu-Logic Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #ffffff;
            color: #1e293b;
        }

        .step-block {
            border-left: 4px solid #f1f5f9;
            padding-left: 2rem;
            position: relative;
            margin-bottom: 3rem;
        }

        .step-block.active {
            border-left-color: #6366f1;
        }

        .step-number {
            position: absolute;
            left: -14px;
            top: 0;
            width: 28px;
            height: 28px;
            background: #fff;
            border: 2px solid #6366f1;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 800;
            color: #6366f1;
        }

        input[type="checkbox"]:checked+label {
            background-color: #f5f3ff;
            border-color: #a78bfa;
            color: #4c1d95;
        }

        .hidden-view {
            display: none;
        }

        @page {
            size: A4;
            margin: 0;
        }

        @media print {
            .no-print {
                display: none !important;
            }

            .print-page-break {
                page-break-before: always;
                break-before: page;
                height: 0;
                display: block;
                visibility: hidden;
            }

            body {
                padding: 0 !important;
                margin: 0 !important;
                background: white !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
                transform: scale(0.95);
                transform-origin: top left;
                width: 105%;
            }

            .print-area {
                width: 100% !important;
                max-width: none !important;
                margin: 0 !important;
                padding: 10mm 15mm !important;
            }

            #input-view {
                display: block !important;
                opacity: 1 !important;
                visibility: visible !important;
            }

            #input-view header {
                margin-bottom: 1.5rem !important;
                padding-bottom: 1rem !important;
            }

            #result-view,
            #table-view {
                display: none !important;
            }

            textarea,
            input[type="text"] {
                border: 1px solid #cbd5e1 !important;
                background: white !important;
                resize: none;
                overflow: hidden;
            }

            .step-block {
                break-inside: avoid;
                page-break-inside: avoid;
                margin-bottom: 1.5rem !important;
                border-left: 4px solid #6366f1 !important;
            }

            /* Ensure Checkbox styles print correctly */
            input[type="checkbox"]:checked+label {
                background-color: #f5f3ff !important;
                border-color: #a78bfa !important;
                color: #4c1d95 !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }

        .sub-step-title {
            font-size: 0.95rem;
            font-weight: 700;
            color: #475569;
            margin-bottom: 0.5rem;
            display: block;
        }
    </style>
</head>

<body class="py-12 px-6 md:px-20">

    <div class="max-w-3xl mx-auto print-area">

        <!-- View 1: Input Form -->
        <section id="input-view" class="space-y-8 animate-in slide-in-from-bottom fade-in duration-700">

            <!-- PAGE 1 -->
            <div>
                <header class="border-b border-slate-100 pb-6 flex justify-between items-end">
                    <div>
                        <h1 class="text-3xl font-black text-slate-900 tracking-tight mb-2">인지 교정 분석표</h1>
                        <p class="text-slate-500 font-medium text-sm">문제 원인 분석 및 교정 전략 수립</p>
                    </div>
                    <button onclick="window.print()"
                        class="no-print px-5 py-2.5 bg-indigo-50 text-indigo-600 font-bold rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2 border border-indigo-100">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
                        </svg>
                        <span>인쇄하기</span>
                    </button>
                </header>

                <!-- 1. 문제에 대한 이해 -->
                <div class="step-block active">
                    <div class="step-number">1</div>
                    <div class="mb-6">
                        <h4 class="text-xl font-bold text-slate-800">문제에 대한 이해 및 분석</h4>
                        <p class="text-xs text-slate-400 mt-1">문제를 완전히 내 것으로 만드는 과정입니다.</p>
                    </div>

                    <div class="space-y-6">
                        <!-- 1. 문제 내용 -->
                        <div>
                            <span class="sub-step-title">1. 문제 내용 (이해)</span>
                            <textarea id="input-problem"
                                class="w-full p-4 bg-slate-50 border border-slate-200 rounded-xl text-base focus:ring-2 focus:ring-indigo-500 focus:bg-white outline-none transition-all placeholder:text-slate-300 min-h-[80px]"
                                placeholder="문제를 요약하거나 핵심 내용을 적어주세요."></textarea>
                        </div>

                        <!-- 2. 사용된 개념 -->
                        <div>
                            <span class="sub-step-title">2. 문제 풀이에 사용되는 개념</span>
                            <textarea id="input-concepts"
                                class="w-full p-4 bg-slate-50 border border-slate-200 rounded-xl text-base focus:ring-2 focus:ring-indigo-500 focus:bg-white outline-none transition-all placeholder:text-slate-300 min-h-[60px]"
                                placeholder="이 문제 해결에 필요한 공식, 정리, 개념은 무엇인가요?"></textarea>
                        </div>

                        <!-- 3. 나의 풀이 -->
                        <div>
                            <span class="sub-step-title">3. 이 문제에 대한 나의 풀이</span>
                            <textarea id="input-my-solution"
                                class="w-full p-4 bg-slate-50 border border-slate-200 rounded-xl text-base focus:ring-2 focus:ring-indigo-500 focus:bg-white outline-none transition-all placeholder:text-slate-300 min-h-[120px]"
                                placeholder="내가 실제로 시도했던 풀이 과정을 적어보세요."></textarea>
                        </div>

                        <!-- 4 & 5. 답지와 비교 -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <span class="sub-step-title">4. 이 문제에 대한 답지(해설)</span>
                                <textarea id="input-answer-key"
                                    class="w-full p-4 bg-pink-50 border border-pink-100 rounded-xl text-base focus:ring-2 focus:ring-pink-500 focus:bg-white outline-none transition-all placeholder:text-pink-300 min-h-[120px]"
                                    placeholder="정답지의 풀이를 요약해서 적어보세요."></textarea>
                            </div>
                            <div>
                                <span class="sub-step-title">5. 나의 풀이와 답지의 차이점</span>
                                <textarea id="input-difference"
                                    class="w-full p-4 bg-slate-50 border border-slate-200 rounded-xl text-base focus:ring-2 focus:ring-indigo-500 focus:bg-white outline-none transition-all placeholder:text-slate-300 min-h-[120px]"
                                    placeholder="어느 부분에서 생각이 달랐나요?"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Page Break -->
            <div class="print-page-break"></div>

            <!-- PAGE 2 -->
            <div class="page-2-content space-y-8 pt-4">

                <div class="hidden print:block mb-6 border-b border-slate-100 pb-2">
                    <span class="text-sm font-bold text-slate-400">인지 교정 분석표 - Page 2</span>
                </div>

                <!-- Step 2: Diagnostic -->
                <div class="step-block active">
                    <div class="step-number">2</div>
                    <h4 class="text-xl font-bold text-slate-800 mb-2">2번 실수가 일어난 지점</h4>
                    <p class="text-sm text-indigo-500 font-bold mb-4 italic">나의 사고 과정 중 어디가 막혔나요?</p>
                    <div class="grid grid-cols-2 gap-4" id="error-options">
                        <div class="relative h-full">
                            <input type="checkbox" id="err-read" class="hidden error-checkbox" data-label="읽기(Read)">
                            <label for="err-read"
                                class="flex flex-col p-6 h-32 border-2 border-slate-100 rounded-3xl cursor-pointer transition-all hover:border-indigo-200 bg-white justify-center">
                                <span class="text-xl font-bold text-slate-800">읽기 (Read)</span>
                                <span class="text-sm text-slate-400 mt-2">조건 누락, 오독, 덤벙댐</span>
                            </label>
                        </div>
                        <div class="relative h-full">
                            <input type="checkbox" id="err-plan" class="hidden error-checkbox" data-label="계획(Plan)">
                            <label for="err-plan"
                                class="flex flex-col p-6 h-32 border-2 border-slate-100 rounded-3xl cursor-pointer transition-all hover:border-indigo-200 bg-white justify-center">
                                <span class="text-xl font-bold text-slate-800">계획 (Plan)</span>
                                <span class="text-sm text-slate-400 mt-2">개념 적용 오류, 식 세우기 실패</span>
                            </label>
                        </div>
                        <div class="relative h-full">
                            <input type="checkbox" id="err-calc" class="hidden error-checkbox" data-label="풀이(Solve)">
                            <label for="err-calc"
                                class="flex flex-col p-6 h-32 border-2 border-slate-100 rounded-3xl cursor-pointer transition-all hover:border-indigo-200 bg-white justify-center">
                                <span class="text-xl font-bold text-slate-800">풀이 (Solve)</span>
                                <span class="text-sm text-slate-400 mt-2">단순 계산 실수, 부호 실수</span>
                            </label>
                        </div>
                        <div class="relative h-full">
                            <input type="checkbox" id="err-check" class="hidden error-checkbox" data-label="확인(Check)">
                            <label for="err-check"
                                class="flex flex-col p-6 h-32 border-2 border-slate-100 rounded-3xl cursor-pointer transition-all hover:border-indigo-200 bg-white justify-center">
                                <span class="text-xl font-bold text-slate-800">확인 (Check)</span>
                                <span class="text-sm text-slate-400 mt-2">답안 마킹 실수, 단위 확인</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Schema Tagging -->
                <div class="step-block active">
                    <div class="step-number">3</div>
                    <h4 class="text-xl font-bold text-slate-800 mb-4">문제의 유형 (Schema)</h4>
                    <div class="flex flex-wrap gap-4" id="schema-buttons">
                        <button onclick="toggleSchema(this)"
                            class="schema-btn px-6 py-4 border-2 border-slate-200 rounded-2xl text-base font-bold text-slate-600 hover:border-indigo-400 hover:bg-indigo-50 transition-all shadow-sm">#합치기</button>
                        <button onclick="toggleSchema(this)"
                            class="schema-btn px-6 py-4 border-2 border-slate-200 rounded-2xl text-base font-bold text-slate-600 hover:border-indigo-400 hover:bg-indigo-50 transition-all shadow-sm">#비교하기</button>
                        <button onclick="toggleSchema(this)"
                            class="schema-btn px-6 py-4 border-2 border-slate-200 rounded-2xl text-base font-bold text-slate-600 hover:border-indigo-400 hover:bg-indigo-50 transition-all shadow-sm">#변화하기</button>
                        <button onclick="toggleSchema(this)"
                            class="schema-btn px-6 py-4 border-2 border-slate-200 rounded-2xl text-base font-bold text-slate-600 hover:border-indigo-400 hover:bg-indigo-50 transition-all shadow-sm">#전체와
                            부분</button>
                        <button onclick="toggleSchema(this)"
                            class="schema-btn px-6 py-4 border-2 border-slate-200 rounded-2xl text-base font-bold text-slate-600 hover:border-indigo-400 hover:bg-indigo-50 transition-all shadow-sm">#나누기</button>
                        <button onclick="toggleSchema(this)"
                            class="schema-btn px-6 py-4 border-2 border-slate-200 rounded-2xl text-base font-bold text-slate-600 hover:border-indigo-400 hover:bg-indigo-50 transition-all shadow-sm">#모양과
                            규칙</button>
                    </div>
                </div>

                <!-- Step 4: Prevention -->
                <div class="step-block active">
                    <div class="step-number">4</div>
                    <h4 class="text-xl font-bold text-slate-800 mb-1">실수 방지 '브레이크' 장착</h4>
                    <p class="text-xs text-slate-400 mb-6">다시는 같은 실수를 반복하지 않기 위한 약속</p>
                    <div class="space-y-6">
                        <div class="flex items-center gap-6 group">
                            <div
                                class="w-16 h-16 bg-emerald-100 text-emerald-700 rounded-2xl flex items-center justify-center text-sm font-black shadow-sm group-hover:bg-emerald-200 transition-colors">
                                DO</div>
                            <input type="text" id="input-do"
                                class="flex-1 bg-transparent border-b-2 border-slate-100 p-4 text-xl font-medium outline-none focus:border-emerald-500 transition-colors placeholder:text-slate-300"
                                placeholder="예: '단위' 부터 먼저 확인하기">
                        </div>
                        <div class="flex items-center gap-6 group">
                            <div
                                class="w-16 h-16 bg-red-100 text-red-700 rounded-2xl flex items-center justify-center text-sm font-black shadow-sm group-hover:bg-red-200 transition-colors">
                                STOP</div>
                            <input type="text" id="input-stop"
                                class="flex-1 bg-transparent border-b-2 border-slate-100 p-4 text-xl font-medium outline-none focus:border-red-500 transition-colors placeholder:text-slate-300"
                                placeholder="예: 암산으로 계산하지 않기">
                        </div>
                    </div>
                </div>

                <!-- Action Button -->
                <div class="pt-8 no-print">
                    <button onclick="generateResult()"
                        class="w-full py-5 bg-slate-900 text-white font-black rounded-2xl shadow-xl shadow-slate-200 hover:bg-black transition-all transform active:scale-[0.98] flex items-center justify-center gap-3 text-lg">
                        <span>분석 완료 및 결과 저장</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z"
                                clip-rule="evenodd" />
                        </svg>
                    </button>
                    <p class="text-center text-slate-300 text-xs mt-4">작성 내용을 저장하려면 상단의 [인쇄하기]를 눌러 PDF로 저장하세요.</p>
                </div>
            </div>

        </section>

        <!-- View 2: Result Card (Hidden by default in this new layout logic) -->
        <section id="result-view" class="hidden-view space-y-10 animate-in zoom-in-95 fade-in duration-500">
            <!-- Placeholder for result logic completeness -->
            <div class="text-center py-20">
                <h2 class="text-2xl font-bold">분석이 완료되었습니다.</h2>
                <p class="text-slate-500 mb-6">작성한 내용을 바탕으로 PDF로 저장하시겠습니까?</p>
                <button onclick="goBack()" class="px-6 py-3 bg-indigo-600 text-white rounded-xl">다시 수정하기</button>
            </div>
        </section>

        <!-- View 3: Table View (Hidden) -->
        <section id="table-view" class="hidden-view">
        </section>

    </div>

    <script>
        function toggleSchema(btn) {
            btn.classList.toggle('bg-slate-900');
            btn.classList.toggle('text-white');
            btn.classList.toggle('border-slate-900');
            btn.classList.toggle('active-schema');
        }

        function generateResult() {
            // In this refactored version, the focus is on the Input Form itself being the report.
            // The "Generate Result" button now acts closer to a "Review / Save" prompt.
            // For now, prompt the print dialog or just alert analysis complete.

            const problem = document.getElementById('input-problem').value;

            if (!problem.trim()) {
                alert("문제 내용을 1번 항목에 작성해주세요.");
                document.getElementById('input-problem').focus();
                return;
            }

            // Simple Interaction: Scroll to top and maybe trigger print
            window.scrollTo({ top: 0, behavior: 'smooth' });
            setTimeout(() => {
                alert("분석이 완료되었습니다. [인쇄하기] 버튼을 눌러 PDF로 저장하세요.");
            }, 500);
        }

        function goBack() {
            document.getElementById('result-view').classList.add('hidden-view');
            document.getElementById('input-view').classList.remove('hidden-view');
            window.scrollTo(0, 0);
        }
    </script>
</body>

</html>